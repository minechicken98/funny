<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Blook Pack Opener - Totally Fair!</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Nunito", Arial, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }

            h1 {
                text-align: center;
                color: #fff;
                font-size: 48px;
                margin-bottom: 10px;
                text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
            }

            .subtitle {
                text-align: center;
                color: #fff;
                font-size: 20px;
                margin-bottom: 30px;
                opacity: 0.9;
            }

            .money-display {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 15px;
                padding: 20px;
                text-align: center;
                margin-bottom: 30px;
                backdrop-filter: blur(10px);
            }

            .money-amount {
                font-size: 48px;
                color: #ffd700;
                font-weight: bold;
                text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
            }

            .wheel-container {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                margin-bottom: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            .wheel {
                width: 300px;
                height: 300px;
                border-radius: 50%;
                border: 10px solid #333;
                margin: 0 auto 20px;
                position: relative;
                transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            }

            .wheel-slice {
                position: absolute;
                width: 50%;
                height: 50%;
                transform-origin: 100% 100%;
                clip-path: polygon(0 0, 100% 0, 100% 100%);
            }

            .spin-button {
                display: block;
                margin: 0 auto;
                padding: 15px 40px;
                font-size: 24px;
                font-weight: bold;
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
                border: none;
                border-radius: 50px;
                cursor: pointer;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                transition: transform 0.2s;
            }

            .spin-button:hover {
                transform: scale(1.05);
            }

            .spin-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .packs-section {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                margin-bottom: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            .packs-section h2 {
                text-align: center;
                color: #333;
                margin-bottom: 20px;
            }

            .packs-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 20px;
            }

            .pack {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 15px;
                padding: 20px;
                text-align: center;
                cursor: pointer;
                transition: transform 0.2s;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .pack:hover {
                transform: translateY(-5px);
            }

            .pack-name {
                font-size: 20px;
                color: white;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .pack-price {
                font-size: 32px;
                color: #ffd700;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .pack-image {
                font-size: 60px;
                margin-bottom: 10px;
            }

            .inventory {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            .inventory h2 {
                text-align: center;
                color: #333;
                margin-bottom: 20px;
            }

            .blooks-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }

            .blook {
                background: white;
                border-radius: 10px;
                padding: 15px;
                text-align: center;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
                position: relative;
            }

            .blook-common {
                border: 3px solid #9e9e9e;
            }
            .blook-uncommon {
                border: 3px solid #4caf50;
            }
            .blook-rare {
                border: 3px solid #2196f3;
            }
            .blook-epic {
                border: 3px solid #9c27b0;
            }
            .blook-legendary {
                border: 3px solid #ff9800;
            }
            .blook-mythical {
                border: 3px solid #f44336;
            }

            .blook-emoji {
                font-size: 48px;
                margin-bottom: 5px;
            }

            .blook-name {
                font-size: 14px;
                font-weight: bold;
                margin-bottom: 3px;
            }

            .blook-rarity {
                font-size: 11px;
                text-transform: uppercase;
                font-weight: bold;
            }

            .blook-count {
                position: absolute;
                top: 5px;
                right: 5px;
                background: rgba(0, 0, 0, 0.7);
                color: white;
                padding: 2px 6px;
                border-radius: 10px;
                font-size: 12px;
                font-weight: bold;
            }

            .rarity-common {
                color: #9e9e9e;
            }
            .rarity-uncommon {
                color: #4caf50;
            }
            .rarity-rare {
                color: #2196f3;
            }
            .rarity-epic {
                color: #9c27b0;
            }
            .rarity-legendary {
                color: #ff9800;
            }
            .rarity-mythical {
                color: #f44336;
            }

            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 1000;
                justify-content: center;
                align-items: center;
            }

            .modal.show {
                display: flex;
            }

            .modal-content {
                background: white;
                padding: 40px;
                border-radius: 20px;
                text-align: center;
                max-width: 400px;
                animation: modalPop 0.3s;
            }

            @keyframes modalPop {
                0% {
                    transform: scale(0.5);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            .modal-emoji {
                font-size: 100px;
                margin-bottom: 20px;
            }

            .modal-title {
                font-size: 32px;
                margin-bottom: 10px;
                font-weight: bold;
            }

            .modal-rarity {
                font-size: 24px;
                margin-bottom: 20px;
                text-transform: uppercase;
                font-weight: bold;
            }

            .modal-close {
                padding: 15px 30px;
                font-size: 18px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 50px;
                cursor: pointer;
                font-weight: bold;
            }

            .rates-info {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                padding: 15px;
                margin-top: 20px;
                color: black;
                font-size: 12px;
            }

            .rates-info summary {
                cursor: pointer;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .rates-list {
                margin-top: 10px;
                text-align: left;
                color: #000;
            }

            .empty-inventory {
                text-align: center;
                padding: 40px;
                color: #999;
                font-size: 18px;
            }

            .secret-fire {
                position: fixed;
                bottom: 10px;
                right: 10px;
                font-size: 12px;
                cursor: pointer;
                opacity: 0.3;
                transition: opacity 0.3s;
                z-index: 1000;
            }

            .secret-fire:hover {
                opacity: 1;
            }

            @media (max-width: 768px) {
                h1 {
                    font-size: 32px;
                }
                .money-amount {
                    font-size: 36px;
                }
                .wheel {
                    width: 250px;
                    height: 250px;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üé∞ Blook Pack Opener</h1>
            <p class="subtitle">Spin the wheel and test your luck!</p>

            <div class="money-display">
                <div style="font-size: 18px; color: white; margin-bottom: 5px">
                    Your Balance
                </div>
                <div class="money-amount">$<span id="money">0</span></div>
            </div>

            <div class="wheel-container">
                <h2
                    style="text-align: center; margin-bottom: 20px; color: #333"
                >
                    üí∞ Spin for Money!
                </h2>
                <div
                    style="
                        position: relative;
                        width: 300px;
                        margin: 0 auto 20px;
                    "
                >
                    <div
                        id="pointer"
                        style="
                            position: absolute;
                            top: 10px;
                            left: 50%;
                            transform: translateX(-50%);
                            z-index: 10;
                            width: 0;
                            height: 0;
                            border-left: 10px solid transparent;
                            border-right: 10px solid transparent;
                            border-top: 20px solid #f00;
                            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                        "
                    ></div>
                    <canvas
                        id="wheelCanvas"
                        width="300"
                        height="300"
                        style="display: block"
                    ></canvas>
                </div>
                <button
                    class="spin-button"
                    id="spinButton"
                    onclick="spinWheel()"
                >
                    SPIN WHEEL
                </button>
                <p style="text-align: center; margin-top: 15px; color: #666">
                    One free spin only!
                </p>
            </div>

            <div class="packs-section">
                <h2>üì¶ Buy Blook Packs</h2>
                <div class="packs-grid">
                    <div class="pack" onclick="buyPack(10)">
                        <div class="pack-image">üì¶</div>
                        <div class="pack-name">Basic Pack</div>
                        <div class="pack-price">$10</div>
                    </div>
                    <div class="pack" onclick="buyPack(50)">
                        <div class="pack-image">üéÅ</div>
                        <div class="pack-name">Premium Pack</div>
                        <div class="pack-price">$50</div>
                    </div>
                    <div class="pack" onclick="buyPack(100)">
                        <div class="pack-image">üíé</div>
                        <div class="pack-name">Mega Pack</div>
                        <div class="pack-price">$100</div>
                    </div>
                </div>

                <details class="rates-info">
                    <summary>üìä Drop Rates (Click to view)</summary>
                    <div class="rates-list">
                        <div>Common: 4%</div>
                        <div>Uncommon: 1%</div>
                        <div>Rare: 0.5%</div>
                        <div>Epic: 0.1%</div>
                        <div>Legendary: 0.01%</div>
                        <div>Mythical: 0.001%</div>
                        <div style="margin-top: 10px; font-style: italic">
                            Nothing: 94.389%
                        </div>
                    </div>
                </details>
            </div>

            <div class="inventory">
                <h2>üéí Your Blooks</h2>
                <div id="inventoryGrid" class="blooks-grid">
                    <div class="empty-inventory">
                        No blooks yet... Buy some packs!
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="rewardModal">
            <div class="modal-content">
                <div class="modal-emoji" id="rewardEmoji"></div>
                <div class="modal-title" id="rewardTitle"></div>
                <div class="modal-rarity" id="rewardRarity"></div>
                <button class="modal-close" onclick="closeModal()">
                    Awesome!
                </button>
            </div>
        </div>

        <div class="secret-fire" onclick="activateSecretFire()">üî•</div>

        <script>
            let money = 0;
            let inventory = {};
            let spinning = false;
            let hasSpun = false;
            let secretFireActivated = false;

            const wheelPrizes = [10, 25, 50, 75, 100, 250, 500, 1000];
            const wheelColors = [
                "#FF6B6B",
                "#4ECDC4",
                "#45B7D1",
                "#FFA07A",
                "#98D8C8",
                "#F7DC6F",
                "#BB8FCE",
                "#85C1E2",
            ];

            // Blook definitions
            const blooks = {
                common: [
                    { name: "Red Blook", emoji: "üî¥" },
                    { name: "Blue Blook", emoji: "üîµ" },
                    { name: "Green Blook", emoji: "üü¢" },
                    { name: "Yellow Blook", emoji: "üü°" },
                    { name: "White Blook", emoji: "‚ö™" },
                    { name: "Black Blook", emoji: "‚ö´" },
                    { name: "Pink Blook", emoji: "ü©∑" },
                    { name: "Gray Blook", emoji: "üîò" },
                    { name: "Soccer Blook", emoji: "‚öΩ" },
                    { name: "Basketball Blook", emoji: "üèÄ" },
                    { name: "Apple Blook", emoji: "üçé" },
                    { name: "Banana Blook", emoji: "üçå" },
                    { name: "Grape Blook", emoji: "üçá" },
                    { name: "Watermelon Blook", emoji: "üçâ" },
                ],
                uncommon: [
                    { name: "Purple Blook", emoji: "üü£" },
                    { name: "Orange Blook", emoji: "üü†" },
                    { name: "Brown Blook", emoji: "üü§" },
                    { name: "Pizza Blook", emoji: "üçï" },
                    { name: "Burger Blook", emoji: "üçî" },
                    { name: "Taco Blook", emoji: "üåÆ" },
                    { name: "Ice Cream Blook", emoji: "üç¶" },
                    { name: "Donut Blook", emoji: "üç©" },
                    { name: "Cookie Blook", emoji: "üç™" },
                    { name: "Cake Blook", emoji: "üç∞" },
                    { name: "Candy Blook", emoji: "üç¨" },
                    { name: "Lollipop Blook", emoji: "üç≠" },
                    { name: "Chocolate Blook", emoji: "üç´" },
                ],
                rare: [
                    { name: "Star Blook", emoji: "‚≠ê" },
                    { name: "Diamond Blook", emoji: "üíé" },
                    { name: "Fire Blook", emoji: "üî•" },
                    { name: "Lightning Blook", emoji: "‚ö°" },
                    { name: "Snowflake Blook", emoji: "‚ùÑÔ∏è" },
                    { name: "Moon Blook", emoji: "üåô" },
                    { name: "Sun Blook", emoji: "‚òÄÔ∏è" },
                    { name: "Planet Blook", emoji: "ü™ê" },
                    { name: "Rocket Blook", emoji: "üöÄ" },
                    { name: "Alien Blook", emoji: "üëΩ" },
                    { name: "Ghost Blook", emoji: "üëª" },
                    { name: "Skull Blook", emoji: "üíÄ" },
                    { name: "Robot Blook", emoji: "ü§ñ" },
                ],
                epic: [
                    { name: "Crown Blook", emoji: "üëë" },
                    { name: "Trophy Blook", emoji: "üèÜ" },
                    { name: "Gem Blook", emoji: "üí†" },
                    { name: "Crystal Blook", emoji: "üîÆ" },
                    { name: "Magic Blook", emoji: "‚ú®" },
                    { name: "Ninja Blook", emoji: "ü•∑" },
                    { name: "Wizard Blook", emoji: "üßô" },
                    { name: "Knight Blook", emoji: "üõ°Ô∏è" },
                    { name: "Pirate Blook", emoji: "üè¥‚Äç‚ò†Ô∏è" },
                    { name: "Vampire Blook", emoji: "üßõ" },
                    { name: "Angel Blook", emoji: "üòá" },
                    { name: "Devil Blook", emoji: "üòà" },
                    { name: "Thunder Blook", emoji: "‚ö°" },
                ],
                legendary: [
                    { name: "Dragon Blook", emoji: "üêâ" },
                    { name: "Rainbow Blook", emoji: "üåà" },
                    { name: "Unicorn Blook", emoji: "ü¶Ñ" },
                    { name: "Phoenix Blook", emoji: "üî•ü¶Ö" },
                    { name: "Kraken Blook", emoji: "üêô" },
                    { name: "Griffin Blook", emoji: "ü¶Ö" },
                    { name: "Pegasus Blook", emoji: "ü¶Ñ" },
                    { name: "Cerberus Blook", emoji: "üê∫" },
                    { name: "Hydra Blook", emoji: "üêç" },
                    { name: "Leviathan Blook", emoji: "üêã" },
                    { name: "Behemoth Blook", emoji: "ü¶£" },
                    { name: "Chimera Blook", emoji: "ü¶Å" },
                    { name: "Basilisk Blook", emoji: "üê≤" },
                ],
                mythical: [
                    { name: "Golden God Blook", emoji: "‚ú®" },
                    { name: "Cosmic Blook", emoji: "üåå" },
                    { name: "Celestial Blook", emoji: "üåü" },
                    { name: "Divine Blook", emoji: "üëº" },
                    { name: "Eternal Blook", emoji: "‚ôæÔ∏è" },
                    { name: "Infinity Blook", emoji: "üî±" },
                    { name: "Supreme Blook", emoji: "üèÖ" },
                    { name: "Omnipotent Blook", emoji: "üå†" },
                    { name: "Transcendent Blook", emoji: "üí´" },
                    { name: "Primordial Blook", emoji: "üåÄ" },
                    { name: "Void Blook", emoji: "üï≥Ô∏è" },
                    { name: "Quantum Blook", emoji: "‚öõÔ∏è" },
                ],
            };

            // Draw wheel
            const canvas = document.getElementById("wheelCanvas");
            const ctx = canvas.getContext("2d");

            let currentRotation = 0;

            function drawWheel(rotation = 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                const centerX = 150;
                const centerY = 150;
                const radius = 140;
                const slices = wheelPrizes.length;

                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(rotation);
                ctx.translate(-centerX, -centerY);

                for (let i = 0; i < slices; i++) {
                    const startAngle = (i * 2 * Math.PI) / slices;
                    const endAngle = ((i + 1) * 2 * Math.PI) / slices;

                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                    ctx.fillStyle = wheelColors[i];
                    ctx.fill();
                    ctx.strokeStyle = "#fff";
                    ctx.lineWidth = 3;
                    ctx.stroke();

                    // Draw text
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(startAngle + (endAngle - startAngle) / 2);
                    ctx.textAlign = "center";
                    ctx.fillStyle = "#fff";
                    ctx.font = "bold 20px Arial";
                    ctx.fillText("$" + wheelPrizes[i], radius * 0.7, 5);
                    ctx.restore();
                }

                ctx.restore();

                // Draw center circle
                ctx.beginPath();
                ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI);
                ctx.fillStyle = "#333";
                ctx.fill();
            }

            drawWheel();

            function spinWheel() {
                if (spinning || hasSpun) return;
                spinning = true;
                hasSpun = true;
                document.getElementById("spinButton").disabled = true;

                const randomIndex = Math.floor(
                    Math.random() * wheelPrizes.length,
                );
                const prizeMoney = wheelPrizes[randomIndex];

                // Calculate rotation to align the selected prize with the top pointer
                const degreesPerSlice = 360 / wheelPrizes.length;
                // In canvas: 0¬∞ = 3 o'clock, 90¬∞ = 6 o'clock, 180¬∞ = 9 o'clock, 270¬∞ = 12 o'clock (top)
                // Pointer is at top (270¬∞ or -90¬∞)
                // Slice i center is at: (i + 0.5) * degreesPerSlice
                const sliceCenterAngle =
                    randomIndex * degreesPerSlice + degreesPerSlice / 2;
                // We need to rotate the wheel so this slice center ends up at -90¬∞ (top)
                // rotation + sliceCenterAngle = -90 (mod 360)
                const targetDegree = -90 - sliceCenterAngle;
                const spins = 5;
                const totalRotation = 360 * spins + targetDegree;

                // Animate the wheel rotation
                const startTime = Date.now();
                const duration = 3000;
                const startRotation = currentRotation;

                function animate() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);

                    // Easing function (ease-out)
                    const easeProgress = 1 - Math.pow(1 - progress, 3);

                    const rotation =
                        startRotation +
                        ((totalRotation * Math.PI) / 180) * easeProgress;
                    currentRotation = rotation;
                    drawWheel(rotation);

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        money += prizeMoney;
                        updateMoneyDisplay();
                        showReward(
                            `You won $${prizeMoney}!`,
                            "üí∞",
                            "Cash Prize",
                            "success",
                        );

                        setTimeout(() => {
                            spinning = false;
                        }, 100);
                    }
                }

                animate();
            }

            function updateMoneyDisplay() {
                document.getElementById("money").textContent = money;
            }

            function buyPack(cost) {
                if (money < cost) {
                    alert("Not enough money! Spin the wheel to get more.");
                    return;
                }

                money -= cost;
                updateMoneyDisplay();

                // Roll for blook with RIGGED rates (unless secret fire is activated!)
                let result = null;
                let rarity = null;

                if (secretFireActivated) {
                    // 100% mythical rate!
                    rarity = "mythical";
                } else {
                    const roll = Math.random() * 100;

                    if (roll < 0.001) {
                        rarity = "mythical";
                    } else if (roll < 0.011) {
                        rarity = "legendary";
                    } else if (roll < 0.111) {
                        rarity = "epic";
                    } else if (roll < 0.611) {
                        rarity = "rare";
                    } else if (roll < 1.611) {
                        rarity = "uncommon";
                    } else if (roll < 5.611) {
                        rarity = "common";
                    }
                }

                if (rarity) {
                    const rarityBlooks = blooks[rarity];
                    result =
                        rarityBlooks[
                            Math.floor(Math.random() * rarityBlooks.length)
                        ];

                    const key = `${rarity}-${result.name}`;
                    inventory[key] = inventory[key] || {
                        ...result,
                        rarity,
                        count: 0,
                    };
                    inventory[key].count++;

                    showReward(
                        `You got a ${result.name}!`,
                        result.emoji,
                        rarity,
                        "blook",
                    );
                    updateInventory();
                } else {
                    showReward(
                        "Nothing!",
                        "üò¢",
                        "Better luck next time...",
                        "nothing",
                    );
                }
            }

            function showReward(title, emoji, rarity, type) {
                document.getElementById("rewardTitle").textContent = title;
                document.getElementById("rewardEmoji").textContent = emoji;
                const rarityEl = document.getElementById("rewardRarity");
                rarityEl.textContent = rarity;
                rarityEl.className =
                    type === "blook"
                        ? `modal-rarity rarity-${rarity}`
                        : "modal-rarity";
                document.getElementById("rewardModal").classList.add("show");
            }

            function closeModal() {
                document.getElementById("rewardModal").classList.remove("show");
            }

            function activateSecretFire() {
                if (secretFireActivated) {
                    alert("You already found the fire!");
                    return;
                }

                secretFireActivated = true;
                money += 10000;
                updateMoneyDisplay();

                alert(
                    "Congrats you found the fire! You get 10000 dollars. You also unlocked a 100% chance to get mythic!",
                );

                // Hide the fire emoji after clicking
                document.querySelector(".secret-fire").style.display = "none";
            }

            function updateInventory() {
                const grid = document.getElementById("inventoryGrid");

                if (Object.keys(inventory).length === 0) {
                    grid.innerHTML =
                        '<div class="empty-inventory">No blooks yet... Buy some packs!</div>';
                    return;
                }

                grid.innerHTML = "";

                // Sort by rarity
                const rarityOrder = [
                    "mythical",
                    "legendary",
                    "epic",
                    "rare",
                    "uncommon",
                    "common",
                ];
                const sorted = Object.values(inventory).sort((a, b) => {
                    return (
                        rarityOrder.indexOf(a.rarity) -
                        rarityOrder.indexOf(b.rarity)
                    );
                });

                sorted.forEach((item) => {
                    const div = document.createElement("div");
                    div.className = `blook blook-${item.rarity}`;
                    div.innerHTML = `
                    <div class="blook-count">${item.count}</div>
                    <div class="blook-emoji">${item.emoji}</div>
                    <div class="blook-name">${item.name}</div>
                    <div class="blook-rarity rarity-${item.rarity}">${item.rarity}</div>
                `;
                    grid.appendChild(div);
                });
            }

            updateMoneyDisplay();
        </script>
    </body>
</html>
